# cakephp 環境構築メモ

## version:

    php7系
    cakephp4系
    MySQL

## 仕組み

    nginx: リバースプロキシ用
    cakephp: php-fpmでポート9000で起動
    MySQL: 3306
            データはボリューム化して永続化はするが、共有ディレクトリ化はせず、
            dockerホストでの管理下とする

## docker イメージ

    nginx: 既存のものをそのまま利用
    php: php-fpmが内包しているものを利用、存在しない場合は作成
    MySQL: 既存のものを利用

## 方法

### Composer インストール

php-fpm が入ったコンテナを利用する
基本、アプリサーバとするため、mysql などの接続も考慮

### Cakephp プロジェクトを作成

    → ビルドでプロジェクトを作成するのではなく、すでに準備冴えているプロジェクトを利用する
     →　プロジェクト作成自体はコンテナに直接入って作成する流れにする
     → ドキュメントルート自体のディレクトリはボリュームで共有ディレクトリを利用し、作成済みの場合はそのままnginx

から起動することができる
　　　 → DB は別定義しているが接続はできるかと…

### nginx 設定

php-fpm、db コンテナが起動した際に起動する仕組み
ポートは一応、80, 443

### DB 設定

ルート用ユーザー、ルート用パスワード、接続用ユーザー、接続用パスワード、データベース名を利用する
ポートは 3306
データは docker ホストのボリュームを利用
